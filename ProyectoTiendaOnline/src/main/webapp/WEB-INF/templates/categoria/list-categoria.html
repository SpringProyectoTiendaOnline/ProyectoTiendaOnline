<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
<script
	src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
<script
	src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<meta charset="utf-8">
<title>Categorias</title>
</head>
<body>
	<nav th:replace="fragmentos/header_loader"></nav>

	<br />
	<br />
	<div class="container">
		<div class="card">
			<h5 class="card-header">Gestión Categoría</h5>
			<div class="card-body">
				<div class="alert alert-danger" role="alert"
					th:if="${Mensaje != null}">
					<div th:each="error : ${Mensaje}">
						<p th:text="${error.defaultMessage}">
					</div>
				</div>
				<br /> <br />
				<div class="input-group mb-3">
					<div class="input-group-prepend">
						<span class="input-group-text" id="buscarProducto">Buscar
							Producto</span>
					</div>
					<input class="typeahead tt-input" sec:authorize="hasAuthority('ROL_ADMIN')" type="text" id="buscarProducto" name="buscarProducto" placeholder="Busca el Producto" autocomplete="off" spellcheck="false" dir="auto">
					<!-- /input-group -->
				</div>
				<br />
				<!-- Button trigger modal -->
				<button type="button" class="btn btn-primary" data-toggle="modal"
					data-target="#addCategoria">Añadir Categoría</button>

				<br />
				<form action="#" th:action="@{/Categoria/create-categoria}"
					th:object="${categoria}" method="post">
					<!-- Modal -->
					<div class="modal fade" id="addCategoria" tabindex="-1"
						role="dialog" aria-labelledby="addCategoriaLabel"
						aria-hidden="true">


						<div class="modal-dialog" role="document">
							<div class="modal-content">

								<div class="modal-header">
									<h5 class="modal-title" id="addCategoriaLabel">Añadir
										Categoria</h5>

									<button type="button" class="close" data-dismiss="modal"
										aria-label="Close">
										<span aria-hidden="true">&times;</span>
									</button>
								</div>



								<div class="modal-body">

									<div class="form-group col-md-8">
										<label for="nombreCategoria" class="col-form-label">Nombre
											Categoría : </label> <input type="text" th:field="*{nombreCategoria}"
											class="form-control" id="nombreCategoria"
											name="nombreCategoria" placeholder="Nombre de Categoría">
									</div>

								</div>

								<div class="modal-footer">
									<button type="button" class="btn btn-secondary"
										data-dismiss="modal">Close</button>
									<input type="submit" class="btn btn-primary" value="Save">
									<!-- / modal footer -->
								</div>
							</div>
							<!-- /modal dialog -->
						</div>
						<!-- modal fade -->
					</div>
					<!-- / form de añadir la categoria -->
				</form>
				<br /> <br />
				<table class="table table-hover">
					<thead class="thead-dark">
						<tr>
							<th scope="col">#</th>
							<th scope="col">Nombre Categoria</th>
							<th scope="col">Editar</th>
							<th scope="col">Eliminar</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="categoria, iter : ${listaCategoria}">
							<th scope="row" th:text="${iter.index + 1}"></th>
							<td th:text="${categoria.nombreCategoria}"></td>
							<td sec:authorize="hasAuthority('ROL_ADMIN')"><a
								class="btn btn-primary" th:href="@{/Categoria/{idCategoria}(idCategoria=${categoria.idCategoria})}"><i class="fas fa-edit"></i></a></td>
							<td sec:authorize="hasAuthority('ROL_ADMIN')"><a
								class="btn btn-danger borrar"><i class="fas fa-times"></i></a></td>
						</tr>
					</tbody>
				</table>

				<!-- /card body -->
			</div>
			<!-- / card -->
		</div>
		<!-- /container -->
	</div>
</body>
</html>