<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Search</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script type="text/javascript">
	function search() {
		$.ajax({
			type : "POST",
			url : "/Search/searchProducto/{idCliente}",
			data : "valor=" + $("#valorProducto").val(),
			success : function(res) {
				alert(res);
			},

			error : function() {
				alert("No es válido");
			}

		});
	}
</script>
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

</head>

<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a class="navbar-brand"
			th:href="@{/Cliente/perfil-cliente/{idCliente}(idCliente=${Cliente.idCliente})}"
			th:text="${Cliente.email}"></a>

		<button class="navbar-toggler" type="button" data-toggle="collapse"
			data-target="#navbarColor02" aria-controls="navbarColor02"
			aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarColor02">
			<ul class="navbar-nav mr-auto">
				<li><a class="nav-link"
					th:href="@{/indice/{idCliente}(idCliente=${Cliente.idCliente})}">Home</a></li>

				<li><a class="nav-link"
					th:href="@{/Producto/list-product-user/{idCliente}(idCliente=${Cliente.idCliente})}">Producto</a></li>

				<li><a class="nav-link"
					th:href="@{/ListaPedido/list-pedido-user/{idCliente}(idCliente=${Cliente.idCliente})}">Pedidos</a></li>

				<li class="nav-item"><a class="nav-link" th:href="@{/logout}">Log
						Out</a></li>

			</ul>

			<form class="form-inline my-2 my-lg-0"
				th:action="@{/Compra/show-carrito/{idCliente}(idCliente=${Cliente.idCliente})}">
				<button
					class="btn btn-secondary my-2 my-sm-0 glyphicon glyphicon-shopping-cart"
					type="submit" aria-hidden="true">
					<span>Carrito</span>
				</button>
			</form>

			<form method="post" class="form-inline my-2 my-lg-0"
				th:action="@{/Search/searchProducto/{idCliente}(idCliente=${Cliente.idCliente})}">
				<input class="form-control mr-sm-2" type="text" name="valorProducto"
					id="valorProducto" placeholder="Search">
				<button class="btn btn-secondary my-2 my-sm-0" type="submit"
					onclick="search();">Search</button>
			</form>
		</div>
	</nav>

	<div class="container">

		<h1>Lista de productos</h1>
		<br>
		<div class="panel panel-default">
			<div class="panel-heading">Productos:</div>

			<div class="alert alert-danger " th:if="${not #strings.isEmpty(msg)}">
				<div th:each="error : ${msg}">
					<p th:text="${error}">
				</div>
			</div>

			<div id="result2"></div>

			<table id="result" class="table">
			</table>
			<!--<table id="result" class="table">
				<thead>
					<tr>
						<th>Código Producto</th>
						<th>Título</th>
						<th>Descripción</th>
						<th>Precio</th>
						<th>Descuento</th>
						<th>Añadir a Carrito</th>

					</tr>
				</thead>

				<tbody>

					  <tr th:each="producto, iterator : ${listaProductos}">
						<td th:text=" ${producto.codProducto}"></td>
						<td th:text=" ${producto.titulo}"></td>
						<td th:text=" ${producto.descripcion}"></td>
						<td th:text=" ${producto.precio}"></td>
						<td th:text=" ${producto.descuento}"></td>
						<td><a href=#
							th:href="@{/Compra/comprarProducto/{idCliente}/{idProducto}(idCliente = ${Cliente.idCliente}, idProducto = ${producto.idProducto})}">
								<button type="button" class="btn btn-outline-success">
									Añadir</button>
						</a></td>
					</tr>
				</tbody>
			</table>  -->
			<div></div>
		</div>
	</div>
</body>
</html>